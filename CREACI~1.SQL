--------------->(TODO ESTO SE HACE COMO ADMIN DEL CLOUD WALLET)<-------------------

-- CREANDO USUARIO DUEÑO DE LAS TABLAS (TODO ESTO SE HACE COMO ADMIN DEL CLOUD WALLET)
CREATE USER DUEÑOBD IDENTIFIED BY "Proyecto12345678";
GRANT CONNECT, RESOURCE TO DUEÑOBD;    --RESOURCE PORQUE ES DUEÑO DE LAS TABLAS Y PUEDE HACER TODO PERO NO MAS QUE EL ADMIN.
GRANT UNLIMITED TABLESPACE TO DUEÑOBD;
GRANT CREATE PUBLIC SYNONYM TO DUEÑOBD;
GRANT CREATE SYNONYM to DUEÑOBD;
GRANT DROP PUBLIC SYNONYM TO "DUEÑOBD" ;
GRANT DROP ANY SYNONYM TO "DUEÑOBD" ;
GRANT CREATE VIEW TO DUEÑOBD ;
GRANT CREATE ANY VIEW TO DUEÑOBD ;
GRANT CREATE MATERIALIZED VIEW TO DUEÑOBD ;
GRANT CREATE ANY MATERIALIZED VIEW TO DUEÑOBD ;

--CREANDO USUARIOS DESARROLADOR 1 Y 2
--USUARIO DESARROLLADOR N°1	Conectarse a la base de datos, crear procedimientos, crear triggers,
--crear vistas y crear vistas materializadas.
--USUARIO DESARROLLADOR N°2	Conectarse a la base de datos, crear procedimientos, 
--crear secuencias, crear triggers, crear vistas y crear vistas materializadas.

CREATE USER DESARROLLADOR1 IDENTIFIED BY "Proyecto12345678";
GRANT UNLIMITED TABLESPACE TO DESARROLLADOR1;

-------------------------------------------------------------
CREATE USER DESARROLLADOR2 IDENTIFIED BY "Proyecto12345678";
GRANT UNLIMITED TABLESPACE TO DESARROLLADOR2;

----------------------------------------------------------------
------------------ESTE DESARROLLADOR ES DE -->PRUEBA<-- PARA PROBAR QUE LOS ROLES FUNCIONEN A LA PERFECCION----------
CREATE USER DESARROLLADOR3 IDENTIFIED BY "Proyecto12345678";
GRANT UNLIMITED TABLESPACE TO DESARROLLADOR3;


------CREANDO Y ASIGNANDO ROLES A LOS USUARIOS
---->(SI LLEGARA UN NUEVO TRABAJADORA TRABAJAR EN ESTA AREA, SOLO SE LE ASIGNA EL ROL   <---------
----> Y ASI NO HAY QUE CREAR USUARIOS TRAS USUARIO Y SE MEJORA LA ADMINISTRACION Y SEGURIDAD DE LA EMPRESA EN TORNO A LOS DATOS)

--------------CREANDO ROLES-------------------------------------------------

CREATE ROLE ROL_DETALLESBECA; --PARA DESARROLLADOR 1 y 3(el 3 es de prueba para ver que funcione y se vean los datos de que hizo el 1)
CREATE ROLE ROL_PUNTAJES; -- PARA DESARROLLADOR 2 

--------------ASIGNANDO LOS ROLES PARA LOS USUARIOS----------------

GRANT ROL_DETALLESBECA TO DESARROLLADOR1; 
ALTER USER DESARROLLADOR1 DEFAULT ROLE "ROL_DETALLESBECA";

GRANT ROL_PUNTAJES TO DESARROLLADOR2;
ALTER USER DESARROLLADOR2 DEFAULT ROLE "ROL_PUNTAJES";

GRANT ROL_DETALLESBECA TO DESARROLLADOR3; --ESTE ES DE PRUEBA PARA VER QUE FUNCIONEN LOS ROLES
ALTER USER DESARROLLADOR3 DEFAULT ROLE "ROL_DETALLESBECA";

-------------CONSULTAR TODAS LAS TABLAS Y PERMISOS DE CREACION PARA DESARROLLADOR 1(ROL DETALLE BECA) REQUERIMIENTO 2.2.2(SOLO INSERTAR Y UPDATE EN DETALLE POSTULACIN BECA POR SEGURIDAD)-----------------------------------------------------
-------------ESTOS PERMISOS SE PUEDEN HACER TANTO DEL USUARIO ADMIN COMO DEL DUEÑO DE DE LAS TABLAS (DUEÑOBD)
GRANT CONNECT TO ROL_DETALLESBECA;
GRANT CREATE SESSION TO ROL_DETALLESBECA;
GRANT CREATE PROCEDURE TO ROL_DETALLESBECA ;
GRANT CREATE TRIGGER TO ROL_DETALLESBECA ;
GRANT CREATE VIEW TO ROL_DETALLESBECA ;
GRANT CREATE MATERIALIZED VIEW TO ROL_DETALLESBECA ;
GRANT SELECT ON DUEÑOBD.POSTULANTE TO ROL_DETALLESBECA;
GRANT SELECT ON DUEÑOBD.ESTADO_CIVIL TO ROL_DETALLESBECA;
GRANT SELECT ON DUEÑOBD.DIRECCION TO ROL_DETALLESBECA;
GRANT SELECT ON DUEÑOBD.POSTULACION TO ROL_DETALLESBECA;
GRANT SELECT ON DUEÑOBD.ANTECEDENTES_POSTULACION TO ROL_DETALLESBECA;
GRANT SELECT ON DUEÑOBD.INSTITUCION_ACADEMICA TO ROL_DETALLESBECA;
GRANT SELECT ON DUEÑOBD.SUB_ESP_MEDICA TO ROL_DETALLESBECA;
GRANT SELECT ,INSERT,UPDATE ON DUEÑOBD.DETALLE_POSTULACION_BECA TO ROL_DETALLESBECA; 
REVOKE SELECT ON DUEÑOBD.POSTULANTE FROM ROL_DETALLESBECA; -- QUITAR PERMISO A ROL EN CASO DE ERROR O OTRO
--NUNCA SE LE DA EL PERMISO DE DELETIAR A LOS ROLES O USUARIOS SALVO QUE SEAN ADMIN/DUEÑOS.

-------------CONSULTAR TODAS LAS TABLAS Y PERMISOS DE CREACION SOLICITADOS PARA DESARROLLADOR 2 (ROL PUNTAJES) REQUERIMIENTO 2.2.3(SOLO INSERTAR Y UPDATE EN DETALLE POSTULACIN BECA POR SEGURIDAD)-----------------------------------------------------
-------------ESTOS PERMISOS SE PUEDEN HACER TANTO DEL USUARIO ADMIN COMO DEL DUEÑO DE DE LAS TABLAS (DUEÑOBD)
GRANT CONNECT TO ROL_PUNTAJES;
GRANT CREATE SESSION TO ROL_PUNTAJES;
GRANT CREATE PROCEDURE TO ROL_PUNTAJES ;
GRANT CREATE SEQUENCE TO ROL_PUNTAJES;
GRANT CREATE TRIGGER TO ROL_PUNTAJES ;
GRANT CREATE VIEW TO ROL_PUNTAJES ;
GRANT CREATE MATERIALIZED VIEW TO ROL_PUNTAJES ;
GRANT SELECT ON DUEÑOBD.POSTULANTE TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.ESTADO_CIVIL TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.DIRECCION TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.CIUDAD TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.REGION TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.POSTULACION TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.ANTECEDENTES_POSTULACION TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.INSTITUCION_ACADEMICA TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.EXPERIENCIA_LABORAL TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.ESTUDIOS TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.INTERESES TO ROL_PUNTAJES;
GRANT SELECT ON DUEÑOBD.OBJETIVOS TO ROL_PUNTAJES;
GRANT SELECT ,INSERT,UPDATE ON DUEÑOBD.PUNTAJES_POSTULANTE TO ROL_PUNTAJES; 
REVOKE SELECT ON DUEÑOBD.POSTULANTE FROM ROL_PUNTAJES; -- QUITAR PERMISO A ROL EN CASO DE ERROR
--NUNCA SE LE DA EL PERMISO DE DELETIAR A LOS ROLES O USUARIOS SALVO QUE SEAN ADMIN/DUEÑOS.

commit;
